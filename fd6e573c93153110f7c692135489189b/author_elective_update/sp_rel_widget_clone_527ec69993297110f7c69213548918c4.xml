<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_rel_widget_clone">
    <sp_rel_widget_clone action="DELETE">
        <child display_value="Copy of Manager Hub Skill Filter">5e7ec65993297110f7c6921354891875</child>
        <cloned>2023-09-27 05:25:36</cloned>
        <last_validated>2023-09-27 05:25:36</last_validated>
        <parent display_value="Manager Hub Skill Filter">753a06c9c3143110a50fac8b8640dd0b</parent>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;sp_widget&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[api.controller = function($scope, $timeout, i18n, $rootScope, mhSkillMatrixService) {

	var c = this;
	c.filterPills = [];
	c.expandRequiredSkills = false;
	c.expandAdditionalSkills = false;
	c.modifiedFilters = {
		"skills": new Set(),
		"team_members": new Set()
	};
	c.clearLabel = i18n.getMessage("Clear {0}");
	c.toggleFlyout = false;
	c.isSearching = false;
	c.limit = 20;
	c.searchCharLimit = 3;

	c.filterData = [{
		"filterSelectedCount": 0,
		"totalSelected": 0,
		"title": i18n.getMessage("Skills"),
		"showFilterSection": true,
		"showMore": true,
		"filterDisplayCount": 0,
		"isSearchable": true,
		"filterSections": [{
			"filterSectionId": "required_skills",
			"selected": false,
			"sectionSelectedCount": 0,
			"limit": c.limit,
			"displayCount": 0,
			"filterOptions": [],
			"title": i18n.getMessage("Required skills")
		},
		{
			"filterSectionId": "additional_skills",
			"selected": false,
			"sectionSelectedCount": 0,
			"limit": c.limit,
			"displayCount": 0,
			"filterOptions": [],
			"title": i18n.getMessage("Additional skills")
		}
		],
		"filterId": "skills"
	},
	{
		"filterSelectedCount": 0,
		"totalSelected": 0,
		"title": i18n.getMessage("Team members"),
		"filterSections": [{
			"filterSectionId": "reportees",
			"filterOptions": [],
		}],
		"filterId": "team_members"
	}
	];

    function initFilters() {
        var options = mhSkillMatrixService.getFilterOptions();
        updateFilterOptions(options);
    }

    var filterOptionsChangeEvent = mhSkillMatrixService.getFilterOptionsChangeEvent();

    var filterOptionsChangeEventListener = $rootScope.$on(filterOptionsChangeEvent, function(event, data) {
        c.clearAllFilters();
        updateFilterOptions(data);
    });

    function updateFilterOptions(options) {
        var employees = options['employees'];
        var skills = options['skills'];
        var filteredEmployees = c.data.allReportees.filter(function(reportee) {
            return _.includes(employees, reportee.id);
        });
        setFilterOptions('skills', 'required_skills', skills['requiredSkills']);
        setFilterOptions('skills', 'additional_skills', skills['additionalSkills']);
        setFilterOptions('team_members', 'reportees', filteredEmployees);
    }

    $scope.$on('$destroy', function() {
        filterOptionsChangeEventListener();
    });

	function setFilterOptions(filterId, filterSectionId, options) {
		if (_.isEmpty(options))
			return;

		_.forEach(options, function (eachOption) {
			eachOption['selected'] = false;
			eachOption['display'] = false;
		});

		var filter = _.find(c.filterData, _.matchesProperty('filterId', filterId));

		if (!_.isEmpty(filter)) {
			var filterSection = _.find(filter.filterSections, _.matchesProperty('filterSectionId', filterSectionId));
			if (!_.isEmpty(filterSection))
				filterSection.filterOptions = options;
		}
	}
	c.toggleAccordion = function (filterSection) {
		if (filterSection == 'required_skills')
			c.expandRequiredSkills = !c.expandRequiredSkills;
		else
			c.expandAdditionalSkills = !c.expandAdditionalSkills;
	}

	c.onFilterSectionValueChange = function (filter, filterSection) {
		filter.filterSelectedCount -= filterSection.sectionSelectedCount;
		filterSection.filterOptions.forEach(function (filterOption) {
			filterSection.sectionSelectedCount = filterSection.selected ? filterSection.filterOptions.length : 0;
			if (filterSection.selected != filterOption.selected) {
				filterOption.selected = filterSection.selected;
				updateModifiedFilters(filter, filterOption);
			}
		});
		filter.filterSelectedCount += filterSection.sectionSelectedCount;
	}

	c.onFilterValueChange = function (filter, filterSection, filterOption) {
		var option = document.getElementById('option-checkbox-' + filterOption.id);
		if (option.checked) {
			filterSection.sectionSelectedCount++;
			filter.filterSelectedCount++;
		}
		else {
			filterSection.sectionSelectedCount--;
			filter.filterSelectedCount--;
		}
		filterSection.selected = filterSection.sectionSelectedCount &gt;= 0;
		updateModifiedFilters(filter, filterOption);
	};

	c.applyFilter = function (filter) {
		$('#fieldset-' + filter.filterId).removeClass('open');
		filter.totalSelected = filter.filterSelectedCount;
		c.expandRequiredSkills = false;
		c.expandAdditionalSkills = false;
		c.modifiedFilters[filter.filterId].clear();
		addFilterPills(filter);
		resetSearch();
		mhSkillMatrixService.applyFilter(c.filterPills);
	};

	c.applyFilterFlyout = function () {
		$timeout(function () {
			c.filterData.forEach(function (filter) {
				filter.totalSelected = filter.filterSelectedCount;
				c.modifiedFilters[filter.filterId].clear();
				addFilterPills(filter);
				mhSkillMatrixService.applyFilter(c.filterPills);
			});
			resetSearch();
		}, 0);
	}

	c.clearFilterFlyout = function () {
		c.filterData.forEach(function (filter) {
			c.clearFilterGroup(filter);
		});
	}

	c.clearFilterGroup = function (filter) {
		filter.filterSections.forEach(function (filterSection) {
			filterSection.sectionSelectedCount = 0;
			filterSection.selected = false;
			filterSection.filterOptions.forEach(function (filterOption) {
				if (filterOption.selected) {
					filterOption.selected = false;
					updateModifiedFilters(filter, filterOption);
				}
			});
		});
		filter.filterSelectedCount = 0;
	};

	c.clearPill = function (filterOption) {
		updateFilterPills(filterOption);
		updateFilterModel(filterOption);
		mhSkillMatrixService.applyFilter(c.filterPills);
	};

	function updateFilterPills(delPill) {
		c.filterPills = c.filterPills.filter(function (pill) {
			return !(delPill.id === pill.id &amp;&amp; delPill.sourceId === pill.sourceId);
		});
	}

	function updateFilterModel(clearedPill) {
		var filter = _.find(c.filterData, _.matchesProperty('filterId', clearedPill.groupId));
		var filterSection = _.find(filter.filterSections, _.matchesProperty('filterSectionId', clearedPill.sourceId));
		filterSection.filterOptions.forEach(function (filterOption) {
			if (filterOption.id === clearedPill.id) {
				filterOption.selected = false;
				filter.filterSelectedCount--;
				filter.totalSelected--;
				filterSection.sectionSelectedCount--;
			}
		});
	}

	c.checkIfFilterAlreadyAdded = function (filterId, sourceId) {
		var filterPills = c.filterPills;
		var filterPillsLen = filterPills.length;
		if (filterPillsLen.length === 0)
			return false;
		for (var pIdx = 0; pIdx &lt; filterPillsLen; pIdx++)
			if (filterPills[pIdx].id === filterId &amp;&amp; filterPills[pIdx].sourceId === sourceId)
				return true;
		return false;
	};

	c.clearAllFilters = function () {
		c.filterPills.forEach(function (deletedPill) {
			c.clearPill(deletedPill);
		});
		c.filterData.forEach(function (filter) {
			filter.filterSections.forEach(function (filterSection) {
				filterSection.selected = false;
			});
		});
	}

	c.submitSearch = function (filter) {
		var searchText = c.searchTerm.toLowerCase();
		filter.filterDisplayCount = 0;
		filter.filterSections.forEach(function (filterSection) {
			filterSection.displayCount = 0;
		});
		if (searchText) {
			c.isSearching = true;
			if (searchText.length &gt;= c.searchCharLimit) {
				filter.filterSections.forEach(function (filterSection) {
					filterSection.filterOptions.forEach(function (filterOption) {
						filterOption.display = false;
						if (filterOption.name.toLowerCase().indexOf(searchText) &gt; -1) {
							filterOption.display = true;
							filterSection.displayCount++;
						}
					});
					filter.filterDisplayCount += filterSection.displayCount;
				});
			}
		}
		else
			c.isSearching = false;
	}

	c.disableApply = function () {
		var modifiedCount = c.modifiedFilters["skills"].size + c.modifiedFilters['team_members'].size;
		return modifiedCount == 0;
	}

	c.showMore = function (filterSection) {
		filterSection.limit += c.limit;
	}

	c.showLess = function (filterSection) {
		filterSection.limit = c.limit;
	}

	c.disableCancel = function () {
		var totalSelectedCount = 0;
		c.filterData.forEach(function (filter) {
			totalSelectedCount += filter.filterSelectedCount;
		});
		return totalSelectedCount == 0;
	}

	function updateFilterPills(delPill) {
		c.filterPills = c.filterPills.filter(function (pill) {
			return !(delPill.id === pill.id &amp;&amp; delPill.sourceId === pill.sourceId);
		});
	}

	function addFilterPills(filter) {
		var deltaFilters = [];
		var groupId = filter.filterId;
		filter.filterSections.forEach(function (filterSection) {
			var sourceId = filterSection.filterSectionId;
			filterSection.filterOptions.forEach(function (filter) {
				var filterAdded = c.checkIfFilterAlreadyAdded(filter.id, sourceId);
				if (!filterAdded &amp;&amp; filter.selected)
					c.filterPills.push({
						id: filter.id,
						name: filter.name,
						groupId: groupId,
						sourceId: sourceId,
						clearLabel: i18n.format(c.clearLabel, filter.name)
					});
				else if (filterAdded &amp;&amp; !filter.selected)
					deltaFilters.push({
						id: filter.id,
						sourceId: sourceId
					});
			});
		});
		removeUnCheckedFilters(deltaFilters);
	}

	function removeUnCheckedFilters(filters) {
		var filtersLength = filters.length;
		c.filterPills = c.filterPills.filter(function (pill) {
			for (var fIdx = 0; fIdx &lt; filtersLength; fIdx++) {
				if (filters[fIdx].id === pill.id &amp;&amp; filters[fIdx].sourceId === pill.sourceId)
					return false;
			}
			return true;
		});
	}

    initFilters();
	function updateModifiedFilters(filter, filterOption) {
		var filterId = filter.filterId;
		if (c.modifiedFilters[filterId].has(filterOption.id))
			c.modifiedFilters[filterId].delete(filterOption.id);
		else
			c.modifiedFilters[filterId].add(filterOption.id);
	}

	function resetSearch() {
		c.isSearching = false;
		c.searchTerm = null;
	}
};]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;$label-primary-bg: #D1D2EE !default;
$badge-bg: #656E81 !default;
$panel-default-text: #181A1F !default;
$border-primary: #8790A1 !default;
$border-tertiary: #DADDE2 !default;
$border-secondary: #ACB2BE !default;
$brand-primary: #4F52BD !default;
$background-primary: #FFFFFF !default;
$text-white: #FFFFFF !default;
$text-muted: #656E81 !default;
$text-primary: #181A1F !default;
$font-size-xs: 12px !default;
$font-size-small: 14px !default;
$font-size-lg: 16px !default;
$sp-space--border: 1px !default;
$sp-space--xxs: 2px !default;
$sp-space--xs: 4px !default;
$sp-space--margin: 6px !default;
$sp-space--sm: 8px !default;
$sp-space--accordion: 11px !default;
$sp-space--md: 12px !default;
$sp-space--lg: 16px !default;
$sp-space--xl: 24px !default;
$sp-space-xxl: 36px !default;
$sp-space--dropdown: 300px !default;
$sp-space--grid: 414px;
$border: #D3D6DC !default;
$sp-space--close: 6px !default;
$close-color: var(--special-close-color-default, rgba(0, 0, 0, 0.70));
$checkbox-icon-size: 10px;
$icon-line-height: 16px;
$filter-content-margin: 20px !default;
$filter-skill-label-width: 152px !default;
$filter-pill-border: 1px !default;
$filter-pill-height: 68px !default;

/* Common styles */
.btn.btn-link:disabled {
	border: none;
}

.display-flex {
	display: flex;
}

.space-between {
	justify-content: space-between;
	align-items: center;
}

.align-left {
	text-align: left;
}

.align-right {
	text-align: right;
}

input[type="checkbox"] {
	accent-color: $brand-primary;
}

.pointer {
	cursor: pointer;
}

.mg-bt-lg {
	margin-bottom: $sp-space--lg;
}

#hr-required_skills {
	margin-bottom: $sp-space--lg;
}

.pd-initial {
	padding: initial !important;
}

/* filter checkbox styles */
#filter-content-skills {
	margin-bottom: 0px;
	margin-left: $filter-content-margin + $sp-space--xl;
}

.search-list {
	margin-left: 0;
}

.default-list-group {
	position: relative;
	margin-bottom: 0;
	.filter-checkbox {
		position: relative;
		right: $sp-space--xl;
	}

	span {
		position: relative;
		right: $sp-space--xl;
	}
}

.search-option {
	padding: unset;
	margin-left: $sp-space--md;
}

.search-option + .search-option {
	padding-top: $sp-space--sm;
}

.search-warning-flyout {
	margin-bottom: $sp-space--xl;
}

.search-warning {
	padding: $sp-space--xs $sp-space--md;
	color: $text-secondary;
}

.list-group-item {
	border: none;
	padding: 0px;
}

li.list-group-item:not(:last-child) {
	margin-bottom: $sp-space--sm;
}

.filter-groups {
	border: 1px solid transparent;
}

input[type="checkbox"] {
	cursor: pointer;
	position: absolute;

	+label {
		cursor: pointer;
		padding-left: $sp-space--xl;
		margin-bottom: 0px;
		white-space: break-spaces;
	}
}

.filter-label {
	max-width: $filter-skill-label-width;
	display: inline-block;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.filter-skills-label {
	position: relative;
	right: $sp-space--xl;
}

.option-checkbox {
	margin-left: 0px !important;
	position: unset !important;
	opacity: 0;
	width: $sp-space--lg;
	height: $sp-space--lg;
	z-index: -1;
}

.filter-select-all {
	padding: 0px;
	margin-bottom: $sp-space--sm;
}

.filter-pill-display-flex {
	gap: $sp-space--sm;
	display: flex;
	flex-wrap: wrap;
}

/* Filter pill styles */
.filter-pills-container {
	padding: $sp-space--md $sp-space--xl;
	background: $background-secondary;
	border-bottom: $sp-space--border solid $border-tertiary;
	align-items: center;

	#filter-pills-group {

		.pill {
			padding: $sp-space--xs $sp-space--sm;
			font-weight: 400;
			font-size: $font-size-small;
			background: $background-primary !important;
			box-sizing: border-box;
			border: $sp-space--border solid $border-secondary;
		}

		.pill-text {
			margin: 0px $sp-space--xs;
		}
	}

	.filter-pills-height {
		max-height: $filter-pill-height;
		overflow: hidden;
	}

	.filter-pill-actions {
		padding-top: $sp-space--sm;
	}

	.filter-pills-view-all-hide {
		visibility: hidden;
	}
}

/* Desktop &amp;amp; Tablet styles*/
.filter-container {
	border-top: $sp-space--border solid $border-tertiary;
	border-bottom: $sp-space--border solid $border-tertiary;
	background-color: $background-secondary;
	padding: $sp-space--xs $sp-space--xl;

	.filter-bar {
		width: 70%;
	}

	.filter-group {
		display: flex;
		align-items: center;
		color: $text-color;
		gap: $sp-space--sm;
		white-space: nowrap;

		fieldset {
			&amp;gt;.btn-link {
				&amp;amp;:not(:focus) {
					color: $text-secondary;
				}
			}

			&amp;gt;.btn-link[aria-expanded="true"] {
				color: $link-hover-color;
			}
		}

		.dropdown-menu {
			min-width: $sp-space--dropdown;
			max-width: $sp-space--dropdown;
			padding: $sp-space--sm $sp-space--xs $sp-space--xs;

			.conditional-margin {
				margin-top: $sp-space--sm;
			}

			.filter-section {
				margin: 0px $sp-space--md;
				display: flex;
				flex-direction: column;
				gap: $sp-space--sm;
				margin-bottom: $sp-space--lg;

				h5 {
					margin-top: 0;
				}

				hr {
					margin: 0;
				}

				.initials {
					margin-top: $sp-space--sm;
				}
			}

			.filter-section + .filter-section {
				padding-top: $sp-space--lg;
				border-top: $sp-space--border solid $border-tertiary;
			}
		}

		.mh-filter-drop-downs {
			z-index: 100;
		}
	}
}

.filter-content {
	max-height: 340px;
	overflow-y: auto;
}

.options-skills {
	position: relative;
	right: $sp-space--xl;
}


p {
	margin: 0;
}

.filter-actions {
	margin: 0 $sp-space--md $sp-space--md;
	padding-top: $sp-space--lg;
	border-top: $sp-space--border solid $border-tertiary;
}

.filter-applied {
	display: none;
}

.choice-option {
	display: flex;
	flex-direction: row;
	align-items: flex-start;
	gap: $sp-space--sm;
	border-radius: $sp-space--xs;
	cursor: pointer;
	align-self: stretch;
	border: $sp-space--border solid transparent;
	margin-bottom: 0rem;
}

.choice-option-selected {
	background: $brand-primary-lightest;
}

.filter-source-checkbox {
	opacity: 0;
	position: absolute;
	width: $sp-space--lg;
	height: $sp-space--lg;
	z-index: -1;
}

.filter-checkbox {
	width: $sp-space--lg;
	height: $sp-space--lg;
	background: $background-primary;
	border: $sp-space--border solid $border-primary;
	border-radius: $border-radius-small;
	display: flex;
	justify-content: center;
	flex-shrink: 0;
	margin-top: $sp-space--xs;
	cursor: pointer;
}

.filter-checkbox-checked {
	background: $brand-primary;
	border: none;
}

.filter-checkbox-icon {
	font-size: $checkbox-icon-size;
	line-height: $icon-line-height;
	margin-left: $sp-space--border;
	color: $background-primary;
}

.accordion {
	background: none;
	border: none;
	width: $sp-space--accordion;
	font-size: $sp-space--lg;
	display: flex;
	justify-content: center;
}

.skill-filter-section-header {
	display: flex;
	align-items: center;
	gap: $sp-space--sm;
}

.filter-source-header {
	display: flex;
	align-items: baseline;
	gap: $sp-space--sm;
}

input[type="checkbox"] {
	margin-top: $sp-space--margin;
}

button[name="search"]:focus {
	outline: $sp-space--xxs solid $input-border-focus !important;
	outline-offset: -$sp-space--xs !important;
}

.manager-hub-skill-search {
	padding: $sp-space--sm $sp-space--md $sp-space--lg;
	width: 100%;
	.mh-search-form {
		width: 100%;
		display: flex;
		align-content: space-between;
		border: $sp-space--border solid $border-primary;
		border-radius: $sp-space--xs;
		padding: $sp-space--margin $sp-space--sm;
		height: $sp-space-xxl;
	}
	input[type="search"] {
		height: $sp-space--xl;
		padding: unset;
		border: none;
		box-shadow: none;
	}
	.search-icon {
		align-self: center;
		color: $border-primary;
		cursor: default;
	}
}

.search-results {
	margin-bottom: $sp-space--md;
}

// Flyout Styling
.modal {
	.modal-dialog {
		overflow-y: initial !important;
		height: 100%;
		padding: 0rem;
		margin: 0rem;

		.modal-content {
			height: 100%;
			border-radius: 0;
		}

		.modal-body {
			max-height: calc(100vh - 135px);
			overflow-y: auto;
		}

		.modal-footer:before,
		.modal-footer:after {
			content: none;
		}
	}
}

.more-filters-container {
	margin-left: 25px;
}

.modal-flyout.fade.in .modal-dialog {
	transform: translate(0, 0);
}

.modal-flyout.fade .modal-dialog {
	margin: 0 0 0 auto;
	transform: translate(100%, 0);
}

.flyout-template-container {
	height: 100%;
}

.flyout-container {
	height: 100%;

	h3,
	h4 {
		display: inline-block;
	}

	.panel-body-padding {
		padding-left: 0;
	}

	.modal-content {
		height: 100%;
		border-radius: 0;

		.modal-header {
			padding: $sp-space--lg $sp-space--xl;
			margin: 0
		}

	}

	.modal-body {
		padding: $sp-space--xl $sp-space--sm;
		height: 100% !important;
		max-height: calc(100% - 135px) !important;

		.panel-title-filter {
			margin-top: 0rem;
		}

		.mh-flyout-skill-search {
			margin-bottom: $sp-space--lg;
			width: 33%;
		}

		h3 {
			margin-bottom: $sp-space--lg;
		}

		.panel {
			box-shadow: none;
			border: none;
			display: flex;
			flex-direction: column;
			gap: $sp-space--sm;
		}

		.panel + .panel {
			margin-top: $sp-space--xl;
		}

		.divider {
			border: $sp-space--border solid $border-tertiary;
			margin: $sp-space--xl 0;
		}

		.flyout-section-checkbox {
			display: flex;
			flex-direction: row;
			align-items: center;
			gap: $sp-space--sm;
			border-radius: $sp-space--xs;
			cursor: pointer;
			align-self: stretch;
			border: $sp-space--border solid transparent;
			margin-bottom: 0rem;
		}

		.flyout-section-label {
			font-weight: 700;
		}

		.panel-body {
			margin-bottom: $sp-space--sm;
		}

		.filter-checkbox-label {
			margin: 0rem;
		}

		.select-option-container {
			margin-bottom: $sp-space--sm;
		}

		.filter-checkbox {
			margin: 0rem;
		}

		.flyout-option-grid-container {
			display: grid;
			grid-template-columns: $sp-space--grid $sp-space--grid;
			column-gap: $sp-space--xl;
			row-gap: $sp-space--sm;
		}

		.search-section + .search-section{
			margin-top: $sp-space--sm;
		}

		#search-section-additional_skills {
			margin-bottom: $sp-space--xl;
		}

		#flyout-grid-skills {
			padding-left: 21px;
			grid-template-columns: 393px $sp-space--grid;
		}

		.flyout-options {
			position: relative;
			right: $sp-space--xl;
		}

		.filter-label-flyout {
			position: relative;
			right: $sp-space--xl;
		}

		.show-more-btn {
			border: none;
			align-self: flex-start;
			padding-left: 21px;
		}
	}

	.has-search {
		display: flex;
		align-content: space-between;
		border: $sp-space--border solid $border-primary;
		border-radius: $sp-space--xs;
		padding: $sp-space--margin $sp-space--sm;
		max-height: $sp-space-xxl;
		width: 244px;

		input[type="search"] {
			border: none;
			padding: unset;
			box-shadow: none;
			max-height: $sp-space--xl;
		}
		.search-icon {
			align-self: center;
			color: $border-primary;
		}
	}
}&lt;/css&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;mh-skill-filter&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link&gt;&lt;![CDATA[function link(scope, element, attrs, controller) {
	var widgetName = scope.data.widgetName;
	var filterGroupClass =  '.' + widgetName + '-filter-group';

	setTimeout(function() {
		$(document).on('click', '.dropdown-menu', function(event) {
			var attrValue = event.target.getAttribute("data-filter-group-apply");
			if (attrValue === 'filter-desktop-apply') {
				var focusElementId = event.target.getAttribute("data-filter-group-apply-id");
				angular.element(document.getElementById("filter-" + focusElementId)).focus();
			} else if(event.target.getAttribute("data-filter-label") == 'skill-filter-label')
				event.stopPropagation();
		});


		$(document).on('hide.bs.dropdown', filterGroupClass, function(event) {
			var filterGroupId = event.relatedTarget.getAttribute('data-filter-group-id');
			var filterGroup = controller.getFilterGroupById(filterGroupId);
			if(filterGroup)
				updateUnSavedFilters(filterGroup);
		});

	}, 0);

	angular.element(window).on("resize", function() {
		$(".modal-backdrop").hide();
	});

	function updateUnSavedFilters(filterGroup) {
		filterGroup.enableClearButton = filterGroup.selectedCount &gt; 0;
		filterGroup.enableApplyButton = false;
		filterGroup.filterGroupValues.forEach(function(filterValue){
			var isFilterAdded = controller.isPillAlreadyPresent(filterValue);
			if(!isFilterAdded &amp;&amp; filterValue.selected)
				filterValue.selected = false;
			else if(isFilterAdded &amp;&amp; !filterValue.selected)
				filterValue.selected = true;
		});
	}
}]]&gt;&lt;/link&gt;&lt;name&gt;Manager Hub Skill Filter&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
	data.allReportees = new sn_mh.ManagerHubTeamConfig().getReporteeDetails(gs.getUserID());
})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2023-07-26 07:10:40&lt;/sys_created_on&gt;&lt;sys_id&gt;753a06c9c3143110a50fac8b8640dd0b&lt;/sys_id&gt;&lt;sys_mod_count&gt;609&lt;/sys_mod_count&gt;&lt;sys_name&gt;Manager Hub Skill Filter&lt;/sys_name&gt;&lt;sys_package display_value="Manager Hub" source="sn_mh"&gt;d20a85536b30011024ca2421ee44affa&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Manager Hub"&gt;d20a85536b30011024ca2421ee44affa&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_753a06c9c3143110a50fac8b8640dd0b&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2023-08-25 11:35:48&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div id="skill-filter-desktop-view" ng-include="'skill-filter-desktop'"&gt;&lt;/div&gt;
&lt;div class="modal fade modal-flyout" id="mh-skill-filter-flyout-modal"&gt;
  &lt;div class="modal-dialog modal-lg" ng-if="c.toggleFlyout"&gt;
    &lt;div class="flyout-template-container" ng-include="'skill-filter-flyout'"&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div class="filter-pills-container" ng-show="c.filterPills.length"&gt;
    &lt;div class="filter-pill-display-flex" id="filter-pills-group" role="group" aria-label="${Currently filtered by}"&gt;
      &lt;!-- Applied Filters --&gt;
      &lt;div ng-repeat="filter in c.filterPills"&gt;
        &lt;div class="pill rounded"&gt;
          &lt;span data-toggle="tooltip" data-placement="top" title="{{filter.name}}" class="pill-text text-overflow-ellipsis"&gt; {{filter.name}} &lt;/span&gt;
          &lt;span role="button" ng-click="c.clearPill(filter)" aria-label="{{filter.clearLabel}}" tabindex="0" ng-keydown="c.focusFilter($event, filter)"&gt;
            &lt;i class="fa fa-times pointer" aria-hidden="true"&gt;&lt;/i&gt;
          &lt;/span&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;button class="btn btn-link btn-sm" ng-click="c.clearAllFilters()" aria-label="${Clear applied filters}" ng-keydown="c.focusFilter($event)"&gt;${Clear all}&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt; ]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;</payload>
        <sys_class_name>sp_rel_widget_clone</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2023-09-27 05:25:36</sys_created_on>
        <sys_id>527ec69993297110f7c69213548918c4</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>5e7ec65993297110f7c6921354891875</sys_name>
        <sys_package display_value="LEARNING COURSES" source="sn_learning_course">fd6e573c93153110f7c692135489189b</sys_package>
        <sys_policy/>
        <sys_scope display_value="LEARNING COURSES">fd6e573c93153110f7c692135489189b</sys_scope>
        <sys_update_name>sp_rel_widget_clone_527ec69993297110f7c69213548918c4</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2023-09-27 05:25:36</sys_updated_on>
    </sp_rel_widget_clone>
    <sys_update_version action="INSERT_OR_UPDATE">
        <action>DELETE</action>
        <application display_value="LEARNING COURSES">fd6e573c93153110f7c692135489189b</application>
        <file_path/>
        <instance_id>8d14605c70013110a258ecc45dec8fa6</instance_id>
        <instance_name>glide_db_dump</instance_name>
        <name>sp_rel_widget_clone_527ec69993297110f7c69213548918c4</name>
        <payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_rel_widget_clone"><sp_rel_widget_clone action="INSERT_OR_UPDATE"><child display_value="Copy of Manager Hub Skill Filter">5e7ec65993297110f7c6921354891875</child><cloned>2023-09-27 05:25:36</cloned><last_validated>2023-09-27 05:25:36</last_validated><parent display_value="Manager Hub Skill Filter">753a06c9c3143110a50fac8b8640dd0b</parent><payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;sp_widget&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[api.controller = function($scope, $timeout, i18n, $rootScope, mhSkillMatrixService) {

	var c = this;
	c.filterPills = [];
	c.expandRequiredSkills = false;
	c.expandAdditionalSkills = false;
	c.modifiedFilters = {
		"skills": new Set(),
		"team_members": new Set()
	};
	c.clearLabel = i18n.getMessage("Clear {0}");
	c.toggleFlyout = false;
	c.isSearching = false;
	c.limit = 20;
	c.searchCharLimit = 3;

	c.filterData = [{
		"filterSelectedCount": 0,
		"totalSelected": 0,
		"title": i18n.getMessage("Skills"),
		"showFilterSection": true,
		"showMore": true,
		"filterDisplayCount": 0,
		"isSearchable": true,
		"filterSections": [{
			"filterSectionId": "required_skills",
			"selected": false,
			"sectionSelectedCount": 0,
			"limit": c.limit,
			"displayCount": 0,
			"filterOptions": [],
			"title": i18n.getMessage("Required skills")
		},
		{
			"filterSectionId": "additional_skills",
			"selected": false,
			"sectionSelectedCount": 0,
			"limit": c.limit,
			"displayCount": 0,
			"filterOptions": [],
			"title": i18n.getMessage("Additional skills")
		}
		],
		"filterId": "skills"
	},
	{
		"filterSelectedCount": 0,
		"totalSelected": 0,
		"title": i18n.getMessage("Team members"),
		"filterSections": [{
			"filterSectionId": "reportees",
			"filterOptions": [],
		}],
		"filterId": "team_members"
	}
	];

    function initFilters() {
        var options = mhSkillMatrixService.getFilterOptions();
        updateFilterOptions(options);
    }

    var filterOptionsChangeEvent = mhSkillMatrixService.getFilterOptionsChangeEvent();

    var filterOptionsChangeEventListener = $rootScope.$on(filterOptionsChangeEvent, function(event, data) {
        c.clearAllFilters();
        updateFilterOptions(data);
    });

    function updateFilterOptions(options) {
        var employees = options['employees'];
        var skills = options['skills'];
        var filteredEmployees = c.data.allReportees.filter(function(reportee) {
            return _.includes(employees, reportee.id);
        });
        setFilterOptions('skills', 'required_skills', skills['requiredSkills']);
        setFilterOptions('skills', 'additional_skills', skills['additionalSkills']);
        setFilterOptions('team_members', 'reportees', filteredEmployees);
    }

    $scope.$on('$destroy', function() {
        filterOptionsChangeEventListener();
    });

	function setFilterOptions(filterId, filterSectionId, options) {
		if (_.isEmpty(options))
			return;

		_.forEach(options, function (eachOption) {
			eachOption['selected'] = false;
			eachOption['display'] = false;
		});

		var filter = _.find(c.filterData, _.matchesProperty('filterId', filterId));

		if (!_.isEmpty(filter)) {
			var filterSection = _.find(filter.filterSections, _.matchesProperty('filterSectionId', filterSectionId));
			if (!_.isEmpty(filterSection))
				filterSection.filterOptions = options;
		}
	}
	c.toggleAccordion = function (filterSection) {
		if (filterSection == 'required_skills')
			c.expandRequiredSkills = !c.expandRequiredSkills;
		else
			c.expandAdditionalSkills = !c.expandAdditionalSkills;
	}

	c.onFilterSectionValueChange = function (filter, filterSection) {
		filter.filterSelectedCount -= filterSection.sectionSelectedCount;
		filterSection.filterOptions.forEach(function (filterOption) {
			filterSection.sectionSelectedCount = filterSection.selected ? filterSection.filterOptions.length : 0;
			if (filterSection.selected != filterOption.selected) {
				filterOption.selected = filterSection.selected;
				updateModifiedFilters(filter, filterOption);
			}
		});
		filter.filterSelectedCount += filterSection.sectionSelectedCount;
	}

	c.onFilterValueChange = function (filter, filterSection, filterOption) {
		var option = document.getElementById('option-checkbox-' + filterOption.id);
		if (option.checked) {
			filterSection.sectionSelectedCount++;
			filter.filterSelectedCount++;
		}
		else {
			filterSection.sectionSelectedCount--;
			filter.filterSelectedCount--;
		}
		filterSection.selected = filterSection.sectionSelectedCount &gt;= 0;
		updateModifiedFilters(filter, filterOption);
	};

	c.applyFilter = function (filter) {
		$('#fieldset-' + filter.filterId).removeClass('open');
		filter.totalSelected = filter.filterSelectedCount;
		c.expandRequiredSkills = false;
		c.expandAdditionalSkills = false;
		c.modifiedFilters[filter.filterId].clear();
		addFilterPills(filter);
		resetSearch();
		mhSkillMatrixService.applyFilter(c.filterPills);
	};

	c.applyFilterFlyout = function () {
		$timeout(function () {
			c.filterData.forEach(function (filter) {
				filter.totalSelected = filter.filterSelectedCount;
				c.modifiedFilters[filter.filterId].clear();
				addFilterPills(filter);
				mhSkillMatrixService.applyFilter(c.filterPills);
			});
			resetSearch();
		}, 0);
	}

	c.clearFilterFlyout = function () {
		c.filterData.forEach(function (filter) {
			c.clearFilterGroup(filter);
		});
	}

	c.clearFilterGroup = function (filter) {
		filter.filterSections.forEach(function (filterSection) {
			filterSection.sectionSelectedCount = 0;
			filterSection.selected = false;
			filterSection.filterOptions.forEach(function (filterOption) {
				if (filterOption.selected) {
					filterOption.selected = false;
					updateModifiedFilters(filter, filterOption);
				}
			});
		});
		filter.filterSelectedCount = 0;
	};

	c.clearPill = function (filterOption) {
		updateFilterPills(filterOption);
		updateFilterModel(filterOption);
		mhSkillMatrixService.applyFilter(c.filterPills);
	};

	function updateFilterPills(delPill) {
		c.filterPills = c.filterPills.filter(function (pill) {
			return !(delPill.id === pill.id &amp;&amp; delPill.sourceId === pill.sourceId);
		});
	}

	function updateFilterModel(clearedPill) {
		var filter = _.find(c.filterData, _.matchesProperty('filterId', clearedPill.groupId));
		var filterSection = _.find(filter.filterSections, _.matchesProperty('filterSectionId', clearedPill.sourceId));
		filterSection.filterOptions.forEach(function (filterOption) {
			if (filterOption.id === clearedPill.id) {
				filterOption.selected = false;
				filter.filterSelectedCount--;
				filter.totalSelected--;
				filterSection.sectionSelectedCount--;
			}
		});
	}

	c.checkIfFilterAlreadyAdded = function (filterId, sourceId) {
		var filterPills = c.filterPills;
		var filterPillsLen = filterPills.length;
		if (filterPillsLen.length === 0)
			return false;
		for (var pIdx = 0; pIdx &lt; filterPillsLen; pIdx++)
			if (filterPills[pIdx].id === filterId &amp;&amp; filterPills[pIdx].sourceId === sourceId)
				return true;
		return false;
	};

	c.clearAllFilters = function () {
		c.filterPills.forEach(function (deletedPill) {
			c.clearPill(deletedPill);
		});
		c.filterData.forEach(function (filter) {
			filter.filterSections.forEach(function (filterSection) {
				filterSection.selected = false;
			});
		});
	}

	c.submitSearch = function (filter) {
		var searchText = c.searchTerm.toLowerCase();
		filter.filterDisplayCount = 0;
		filter.filterSections.forEach(function (filterSection) {
			filterSection.displayCount = 0;
		});
		if (searchText) {
			c.isSearching = true;
			if (searchText.length &gt;= c.searchCharLimit) {
				filter.filterSections.forEach(function (filterSection) {
					filterSection.filterOptions.forEach(function (filterOption) {
						filterOption.display = false;
						if (filterOption.name.toLowerCase().indexOf(searchText) &gt; -1) {
							filterOption.display = true;
							filterSection.displayCount++;
						}
					});
					filter.filterDisplayCount += filterSection.displayCount;
				});
			}
		}
		else
			c.isSearching = false;
	}

	c.disableApply = function () {
		var modifiedCount = c.modifiedFilters["skills"].size + c.modifiedFilters['team_members'].size;
		return modifiedCount == 0;
	}

	c.showMore = function (filterSection) {
		filterSection.limit += c.limit;
	}

	c.showLess = function (filterSection) {
		filterSection.limit = c.limit;
	}

	c.disableCancel = function () {
		var totalSelectedCount = 0;
		c.filterData.forEach(function (filter) {
			totalSelectedCount += filter.filterSelectedCount;
		});
		return totalSelectedCount == 0;
	}

	function updateFilterPills(delPill) {
		c.filterPills = c.filterPills.filter(function (pill) {
			return !(delPill.id === pill.id &amp;&amp; delPill.sourceId === pill.sourceId);
		});
	}

	function addFilterPills(filter) {
		var deltaFilters = [];
		var groupId = filter.filterId;
		filter.filterSections.forEach(function (filterSection) {
			var sourceId = filterSection.filterSectionId;
			filterSection.filterOptions.forEach(function (filter) {
				var filterAdded = c.checkIfFilterAlreadyAdded(filter.id, sourceId);
				if (!filterAdded &amp;&amp; filter.selected)
					c.filterPills.push({
						id: filter.id,
						name: filter.name,
						groupId: groupId,
						sourceId: sourceId,
						clearLabel: i18n.format(c.clearLabel, filter.name)
					});
				else if (filterAdded &amp;&amp; !filter.selected)
					deltaFilters.push({
						id: filter.id,
						sourceId: sourceId
					});
			});
		});
		removeUnCheckedFilters(deltaFilters);
	}

	function removeUnCheckedFilters(filters) {
		var filtersLength = filters.length;
		c.filterPills = c.filterPills.filter(function (pill) {
			for (var fIdx = 0; fIdx &lt; filtersLength; fIdx++) {
				if (filters[fIdx].id === pill.id &amp;&amp; filters[fIdx].sourceId === pill.sourceId)
					return false;
			}
			return true;
		});
	}

    initFilters();
	function updateModifiedFilters(filter, filterOption) {
		var filterId = filter.filterId;
		if (c.modifiedFilters[filterId].has(filterOption.id))
			c.modifiedFilters[filterId].delete(filterOption.id);
		else
			c.modifiedFilters[filterId].add(filterOption.id);
	}

	function resetSearch() {
		c.isSearching = false;
		c.searchTerm = null;
	}
};]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css&gt;$label-primary-bg: #D1D2EE !default;
$badge-bg: #656E81 !default;
$panel-default-text: #181A1F !default;
$border-primary: #8790A1 !default;
$border-tertiary: #DADDE2 !default;
$border-secondary: #ACB2BE !default;
$brand-primary: #4F52BD !default;
$background-primary: #FFFFFF !default;
$text-white: #FFFFFF !default;
$text-muted: #656E81 !default;
$text-primary: #181A1F !default;
$font-size-xs: 12px !default;
$font-size-small: 14px !default;
$font-size-lg: 16px !default;
$sp-space--border: 1px !default;
$sp-space--xxs: 2px !default;
$sp-space--xs: 4px !default;
$sp-space--margin: 6px !default;
$sp-space--sm: 8px !default;
$sp-space--accordion: 11px !default;
$sp-space--md: 12px !default;
$sp-space--lg: 16px !default;
$sp-space--xl: 24px !default;
$sp-space-xxl: 36px !default;
$sp-space--dropdown: 300px !default;
$sp-space--grid: 414px;
$border: #D3D6DC !default;
$sp-space--close: 6px !default;
$close-color: var(--special-close-color-default, rgba(0, 0, 0, 0.70));
$checkbox-icon-size: 10px;
$icon-line-height: 16px;
$filter-content-margin: 20px !default;
$filter-skill-label-width: 152px !default;
$filter-pill-border: 1px !default;
$filter-pill-height: 68px !default;

/* Common styles */
.btn.btn-link:disabled {
	border: none;
}

.display-flex {
	display: flex;
}

.space-between {
	justify-content: space-between;
	align-items: center;
}

.align-left {
	text-align: left;
}

.align-right {
	text-align: right;
}

input[type="checkbox"] {
	accent-color: $brand-primary;
}

.pointer {
	cursor: pointer;
}

.mg-bt-lg {
	margin-bottom: $sp-space--lg;
}

#hr-required_skills {
	margin-bottom: $sp-space--lg;
}

.pd-initial {
	padding: initial !important;
}

/* filter checkbox styles */
#filter-content-skills {
	margin-bottom: 0px;
	margin-left: $filter-content-margin + $sp-space--xl;
}

.search-list {
	margin-left: 0;
}

.default-list-group {
	position: relative;
	margin-bottom: 0;
	.filter-checkbox {
		position: relative;
		right: $sp-space--xl;
	}

	span {
		position: relative;
		right: $sp-space--xl;
	}
}

.search-option {
	padding: unset;
	margin-left: $sp-space--md;
}

.search-option + .search-option {
	padding-top: $sp-space--sm;
}

.search-warning-flyout {
	margin-bottom: $sp-space--xl;
}

.search-warning {
	padding: $sp-space--xs $sp-space--md;
	color: $text-secondary;
}

.list-group-item {
	border: none;
	padding: 0px;
}

li.list-group-item:not(:last-child) {
	margin-bottom: $sp-space--sm;
}

.filter-groups {
	border: 1px solid transparent;
}

input[type="checkbox"] {
	cursor: pointer;
	position: absolute;

	+label {
		cursor: pointer;
		padding-left: $sp-space--xl;
		margin-bottom: 0px;
		white-space: break-spaces;
	}
}

.filter-label {
	max-width: $filter-skill-label-width;
	display: inline-block;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.filter-skills-label {
	position: relative;
	right: $sp-space--xl;
}

.option-checkbox {
	margin-left: 0px !important;
	position: unset !important;
	opacity: 0;
	width: $sp-space--lg;
	height: $sp-space--lg;
	z-index: -1;
}

.filter-select-all {
	padding: 0px;
	margin-bottom: $sp-space--sm;
}

.filter-pill-display-flex {
	gap: $sp-space--sm;
	display: flex;
	flex-wrap: wrap;
}

/* Filter pill styles */
.filter-pills-container {
	padding: $sp-space--md $sp-space--xl;
	background: $background-secondary;
	border-bottom: $sp-space--border solid $border-tertiary;
	align-items: center;

	#filter-pills-group {

		.pill {
			padding: $sp-space--xs $sp-space--sm;
			font-weight: 400;
			font-size: $font-size-small;
			background: $background-primary !important;
			box-sizing: border-box;
			border: $sp-space--border solid $border-secondary;
		}

		.pill-text {
			margin: 0px $sp-space--xs;
		}
	}

	.filter-pills-height {
		max-height: $filter-pill-height;
		overflow: hidden;
	}

	.filter-pill-actions {
		padding-top: $sp-space--sm;
	}

	.filter-pills-view-all-hide {
		visibility: hidden;
	}
}

/* Desktop &amp;amp; Tablet styles*/
.filter-container {
	border-top: $sp-space--border solid $border-tertiary;
	border-bottom: $sp-space--border solid $border-tertiary;
	background-color: $background-secondary;
	padding: $sp-space--xs $sp-space--xl;

	.filter-bar {
		width: 70%;
	}

	.filter-group {
		display: flex;
		align-items: center;
		color: $text-color;
		gap: $sp-space--sm;
		white-space: nowrap;

		fieldset {
			&amp;gt;.btn-link {
				&amp;amp;:not(:focus) {
					color: $text-secondary;
				}
			}

			&amp;gt;.btn-link[aria-expanded="true"] {
				color: $link-hover-color;
			}
		}

		.dropdown-menu {
			min-width: $sp-space--dropdown;
			max-width: $sp-space--dropdown;
			padding: $sp-space--sm $sp-space--xs $sp-space--xs;

			.conditional-margin {
				margin-top: $sp-space--sm;
			}

			.filter-section {
				margin: 0px $sp-space--md;
				display: flex;
				flex-direction: column;
				gap: $sp-space--sm;
				margin-bottom: $sp-space--lg;

				h5 {
					margin-top: 0;
				}

				hr {
					margin: 0;
				}

				.initials {
					margin-top: $sp-space--sm;
				}
			}

			.filter-section + .filter-section {
				padding-top: $sp-space--lg;
				border-top: $sp-space--border solid $border-tertiary;
			}
		}

		.mh-filter-drop-downs {
			z-index: 100;
		}
	}
}

.filter-content {
	max-height: 340px;
	overflow-y: auto;
}

.options-skills {
	position: relative;
	right: $sp-space--xl;
}


p {
	margin: 0;
}

.filter-actions {
	margin: 0 $sp-space--md $sp-space--md;
	padding-top: $sp-space--lg;
	border-top: $sp-space--border solid $border-tertiary;
}

.filter-applied {
	display: none;
}

.choice-option {
	display: flex;
	flex-direction: row;
	align-items: flex-start;
	gap: $sp-space--sm;
	border-radius: $sp-space--xs;
	cursor: pointer;
	align-self: stretch;
	border: $sp-space--border solid transparent;
	margin-bottom: 0rem;
}

.choice-option-selected {
	background: $brand-primary-lightest;
}

.filter-source-checkbox {
	opacity: 0;
	position: absolute;
	width: $sp-space--lg;
	height: $sp-space--lg;
	z-index: -1;
}

.filter-checkbox {
	width: $sp-space--lg;
	height: $sp-space--lg;
	background: $background-primary;
	border: $sp-space--border solid $border-primary;
	border-radius: $border-radius-small;
	display: flex;
	justify-content: center;
	flex-shrink: 0;
	margin-top: $sp-space--xs;
	cursor: pointer;
}

.filter-checkbox-checked {
	background: $brand-primary;
	border: none;
}

.filter-checkbox-icon {
	font-size: $checkbox-icon-size;
	line-height: $icon-line-height;
	margin-left: $sp-space--border;
	color: $background-primary;
}

.accordion {
	background: none;
	border: none;
	width: $sp-space--accordion;
	font-size: $sp-space--lg;
	display: flex;
	justify-content: center;
}

.skill-filter-section-header {
	display: flex;
	align-items: center;
	gap: $sp-space--sm;
}

.filter-source-header {
	display: flex;
	align-items: baseline;
	gap: $sp-space--sm;
}

input[type="checkbox"] {
	margin-top: $sp-space--margin;
}

button[name="search"]:focus {
	outline: $sp-space--xxs solid $input-border-focus !important;
	outline-offset: -$sp-space--xs !important;
}

.manager-hub-skill-search {
	padding: $sp-space--sm $sp-space--md $sp-space--lg;
	width: 100%;
	.mh-search-form {
		width: 100%;
		display: flex;
		align-content: space-between;
		border: $sp-space--border solid $border-primary;
		border-radius: $sp-space--xs;
		padding: $sp-space--margin $sp-space--sm;
		height: $sp-space-xxl;
	}
	input[type="search"] {
		height: $sp-space--xl;
		padding: unset;
		border: none;
		box-shadow: none;
	}
	.search-icon {
		align-self: center;
		color: $border-primary;
		cursor: default;
	}
}

.search-results {
	margin-bottom: $sp-space--md;
}

// Flyout Styling
.modal {
	.modal-dialog {
		overflow-y: initial !important;
		height: 100%;
		padding: 0rem;
		margin: 0rem;

		.modal-content {
			height: 100%;
			border-radius: 0;
		}

		.modal-body {
			max-height: calc(100vh - 135px);
			overflow-y: auto;
		}

		.modal-footer:before,
		.modal-footer:after {
			content: none;
		}
	}
}

.more-filters-container {
	margin-left: 25px;
}

.modal-flyout.fade.in .modal-dialog {
	transform: translate(0, 0);
}

.modal-flyout.fade .modal-dialog {
	margin: 0 0 0 auto;
	transform: translate(100%, 0);
}

.flyout-template-container {
	height: 100%;
}

.flyout-container {
	height: 100%;

	h3,
	h4 {
		display: inline-block;
	}

	.panel-body-padding {
		padding-left: 0;
	}

	.modal-content {
		height: 100%;
		border-radius: 0;

		.modal-header {
			padding: $sp-space--lg $sp-space--xl;
			margin: 0
		}

	}

	.modal-body {
		padding: $sp-space--xl $sp-space--sm;
		height: 100% !important;
		max-height: calc(100% - 135px) !important;

		.panel-title-filter {
			margin-top: 0rem;
		}

		.mh-flyout-skill-search {
			margin-bottom: $sp-space--lg;
			width: 33%;
		}

		h3 {
			margin-bottom: $sp-space--lg;
		}

		.panel {
			box-shadow: none;
			border: none;
			display: flex;
			flex-direction: column;
			gap: $sp-space--sm;
		}

		.panel + .panel {
			margin-top: $sp-space--xl;
		}

		.divider {
			border: $sp-space--border solid $border-tertiary;
			margin: $sp-space--xl 0;
		}

		.flyout-section-checkbox {
			display: flex;
			flex-direction: row;
			align-items: center;
			gap: $sp-space--sm;
			border-radius: $sp-space--xs;
			cursor: pointer;
			align-self: stretch;
			border: $sp-space--border solid transparent;
			margin-bottom: 0rem;
		}

		.flyout-section-label {
			font-weight: 700;
		}

		.panel-body {
			margin-bottom: $sp-space--sm;
		}

		.filter-checkbox-label {
			margin: 0rem;
		}

		.select-option-container {
			margin-bottom: $sp-space--sm;
		}

		.filter-checkbox {
			margin: 0rem;
		}

		.flyout-option-grid-container {
			display: grid;
			grid-template-columns: $sp-space--grid $sp-space--grid;
			column-gap: $sp-space--xl;
			row-gap: $sp-space--sm;
		}

		.search-section + .search-section{
			margin-top: $sp-space--sm;
		}

		#search-section-additional_skills {
			margin-bottom: $sp-space--xl;
		}

		#flyout-grid-skills {
			padding-left: 21px;
			grid-template-columns: 393px $sp-space--grid;
		}

		.flyout-options {
			position: relative;
			right: $sp-space--xl;
		}

		.filter-label-flyout {
			position: relative;
			right: $sp-space--xl;
		}

		.show-more-btn {
			border: none;
			align-self: flex-start;
			padding-left: 21px;
		}
	}

	.has-search {
		display: flex;
		align-content: space-between;
		border: $sp-space--border solid $border-primary;
		border-radius: $sp-space--xs;
		padding: $sp-space--margin $sp-space--sm;
		max-height: $sp-space-xxl;
		width: 244px;

		input[type="search"] {
			border: none;
			padding: unset;
			box-shadow: none;
			max-height: $sp-space--xl;
		}
		.search-icon {
			align-self: center;
			color: $border-primary;
		}
	}
}&lt;/css&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;mh-skill-filter&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link&gt;&lt;![CDATA[function link(scope, element, attrs, controller) {
	var widgetName = scope.data.widgetName;
	var filterGroupClass =  '.' + widgetName + '-filter-group';

	setTimeout(function() {
		$(document).on('click', '.dropdown-menu', function(event) {
			var attrValue = event.target.getAttribute("data-filter-group-apply");
			if (attrValue === 'filter-desktop-apply') {
				var focusElementId = event.target.getAttribute("data-filter-group-apply-id");
				angular.element(document.getElementById("filter-" + focusElementId)).focus();
			} else if(event.target.getAttribute("data-filter-label") == 'skill-filter-label')
				event.stopPropagation();
		});


		$(document).on('hide.bs.dropdown', filterGroupClass, function(event) {
			var filterGroupId = event.relatedTarget.getAttribute('data-filter-group-id');
			var filterGroup = controller.getFilterGroupById(filterGroupId);
			if(filterGroup)
				updateUnSavedFilters(filterGroup);
		});

	}, 0);

	angular.element(window).on("resize", function() {
		$(".modal-backdrop").hide();
	});

	function updateUnSavedFilters(filterGroup) {
		filterGroup.enableClearButton = filterGroup.selectedCount &gt; 0;
		filterGroup.enableApplyButton = false;
		filterGroup.filterGroupValues.forEach(function(filterValue){
			var isFilterAdded = controller.isPillAlreadyPresent(filterValue);
			if(!isFilterAdded &amp;&amp; filterValue.selected)
				filterValue.selected = false;
			else if(isFilterAdded &amp;&amp; !filterValue.selected)
				filterValue.selected = true;
		});
	}
}]]&gt;&lt;/link&gt;&lt;name&gt;Manager Hub Skill Filter&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
	data.allReportees = new sn_mh.ManagerHubTeamConfig().getReporteeDetails(gs.getUserID());
})();]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2023-07-26 07:10:40&lt;/sys_created_on&gt;&lt;sys_id&gt;753a06c9c3143110a50fac8b8640dd0b&lt;/sys_id&gt;&lt;sys_mod_count&gt;609&lt;/sys_mod_count&gt;&lt;sys_name&gt;Manager Hub Skill Filter&lt;/sys_name&gt;&lt;sys_package display_value="Manager Hub" source="sn_mh"&gt;d20a85536b30011024ca2421ee44affa&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Manager Hub"&gt;d20a85536b30011024ca2421ee44affa&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_753a06c9c3143110a50fac8b8640dd0b&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2023-08-25 11:35:48&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div id="skill-filter-desktop-view" ng-include="'skill-filter-desktop'"&gt;&lt;/div&gt;
&lt;div class="modal fade modal-flyout" id="mh-skill-filter-flyout-modal"&gt;
  &lt;div class="modal-dialog modal-lg" ng-if="c.toggleFlyout"&gt;
    &lt;div class="flyout-template-container" ng-include="'skill-filter-flyout'"&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div class="filter-pills-container" ng-show="c.filterPills.length"&gt;
    &lt;div class="filter-pill-display-flex" id="filter-pills-group" role="group" aria-label="${Currently filtered by}"&gt;
      &lt;!-- Applied Filters --&gt;
      &lt;div ng-repeat="filter in c.filterPills"&gt;
        &lt;div class="pill rounded"&gt;
          &lt;span data-toggle="tooltip" data-placement="top" title="{{filter.name}}" class="pill-text text-overflow-ellipsis"&gt; {{filter.name}} &lt;/span&gt;
          &lt;span role="button" ng-click="c.clearPill(filter)" aria-label="{{filter.clearLabel}}" tabindex="0" ng-keydown="c.focusFilter($event, filter)"&gt;
            &lt;i class="fa fa-times pointer" aria-hidden="true"&gt;&lt;/i&gt;
          &lt;/span&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;button class="btn btn-link btn-sm" ng-click="c.clearAllFilters()" aria-label="${Clear applied filters}" ng-keydown="c.focusFilter($event)"&gt;${Clear all}&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt; ]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;</payload><sys_class_name>sp_rel_widget_clone</sys_class_name><sys_created_by>admin</sys_created_by><sys_created_on>2023-09-27 05:25:36</sys_created_on><sys_id>527ec69993297110f7c69213548918c4</sys_id><sys_mod_count>0</sys_mod_count><sys_name>5e7ec65993297110f7c6921354891875</sys_name><sys_package display_value="LEARNING COURSES" source="sn_learning_course">fd6e573c93153110f7c692135489189b</sys_package><sys_policy/><sys_scope display_value="LEARNING COURSES">fd6e573c93153110f7c692135489189b</sys_scope><sys_update_name>sp_rel_widget_clone_527ec69993297110f7c69213548918c4</sys_update_name><sys_updated_by>admin</sys_updated_by><sys_updated_on>2023-09-27 05:25:36</sys_updated_on></sp_rel_widget_clone></record_update>]]></payload>
        <payload_hash>2016439940</payload_hash>
        <record_name>5e7ec65993297110f7c6921354891875</record_name>
        <reverted_from/>
        <source>3d6e573c93153110f7c692135489189d</source>
        <source_table>sys_update_set</source_table>
        <state>previous</state>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2023-09-27 05:25:36</sys_created_on>
        <sys_id>927ec69993297110f7c69213548918c7</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_recorded_at>18ad5198de60000001</sys_recorded_at>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2023-09-27 05:25:36</sys_updated_on>
        <type>Widget Clone</type>
        <update_guid>d67ec69951297110148fdb547f165ac6</update_guid>
        <update_guid_history>d67ec69951297110148fdb547f165ac6:2016439940</update_guid_history>
    </sys_update_version>
    <sys_metadata_delete action="INSERT_OR_UPDATE">
        <sys_audit_delete display_value="">cdb3872593213110f7c69213548918ad</sys_audit_delete>
        <sys_class_name>sys_metadata_delete</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2023-09-28 03:56:39</sys_created_on>
        <sys_db_object display_value="" name="sp_rel_widget_clone">sp_rel_widget_clone</sys_db_object>
        <sys_id>30eeea88c82a4bdd8ab8457ce7f44b31</sys_id>
        <sys_metadata>527ec69993297110f7c69213548918c4</sys_metadata>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>5e7ec65993297110f7c6921354891875</sys_name>
        <sys_package display_value="LEARNING COURSES" source="sn_learning_course">fd6e573c93153110f7c692135489189b</sys_package>
        <sys_parent/>
        <sys_policy/>
        <sys_scope display_value="LEARNING COURSES">fd6e573c93153110f7c692135489189b</sys_scope>
        <sys_scope_delete display_value="">1a3779aeab964a0987865615b51071f1</sys_scope_delete>
        <sys_update_name>sp_rel_widget_clone_527ec69993297110f7c69213548918c4</sys_update_name>
        <sys_update_version display_value="sp_rel_widget_clone_527ec69993297110f7c69213548918c4">927ec69993297110f7c69213548918c7</sys_update_version>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2023-09-28 03:56:39</sys_updated_on>
    </sys_metadata_delete>
</record_update>
